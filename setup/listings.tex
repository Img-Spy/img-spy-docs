% Listing toc configuration %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\let\Chapter\chapter
\def\chapter{\addtocontents{lol}{\protect\addvspace{10pt}}\Chapter}

% Colors %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% Green
\definecolor{dkgreen}{rgb}{0,0.6,0}
\definecolor{deepgreen}{rgb}{0,0.5,0}
\definecolor{olivedrab}{RGB}{94,140,34}

% Gray
\definecolor{sirocco}{RGB}{114,128,131}
\definecolor{gray}{rgb}{0.5,0.5,0.5}

\definecolor{mauve}{rgb}{0.58,0,0.82}
\definecolor{deepblue}{rgb}{0,0,0.5}
\definecolor{deepred}{rgb}{0.6,0,0}

\definecolor{deepviolet}{RGB}{121, 8, 125}

% Blue
\definecolor{gigas}{RGB}{72, 62, 170}
\definecolor{pictonblue}{RGB}{62, 193, 233}
\definecolor{turquoiseblue}{RGB}{64, 224, 208}
\definecolor{bluebayoux}{RGB}{87,115,131}
\definecolor{funblue}{RGB}{25,78,155}

\definecolor{saffron}{rgb}{0.372,0.211,0.988}
\definecolor{rawsienna}{rgb}{0.819,0.576,0.255}

\definecolor{brightedred}{RGB}{161,0,0}


% Custom macros %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


\lstdefinestyle{defaults}{
	basicstyle=\footnotesize\ttfamily,
	captionpos=b,
	aboveskip=3mm,
	belowskip=3mm,
	showstringspaces=false,
	columns=flexible,
	numbers=left,
	numberstyle=\footnotesize,
	breaklines=true,
	breakatwhitespace=true,
	tabsize=3,
	escapechar=\%,
}
\newcommand{\lstcustomdefaults}{
	\setkeys{lst}{
		style=defaults
	}
}
\newcommand{\newproglanguage}[2]{
	\expandafter\newcommand\csname #1style\endcsname[1][]{
		#2
		\lstcustomdefaults
		\setkeys{lst}{##1}
	}

	\lstnewenvironment{#1}[1][]
	{
		\expandafter\csname #1style\endcsname
		\lstset{##1}
	}
	{}
	
	\expandafter\DeclareDocumentCommand\csname #1external\endcsname
	{ O{} m }
	{
		\expandafter\csname #1style\endcsname
		\lstinputlisting[##1]{##2}
	}
	
	\expandafter\newcommand\csname #1inline\endcsname
	[1]{{\expandafter\csname #1style\endcsname\lstinline!##1!}}
}

%% Code figure
\newenvironment{codefigure}{
	\begin{quote}
}
{
	\end{quote}
}

%% Terminal
\newcommand{\termuser}{user}
\newcommand{\termhost}{host}
\newcommand{\termdir}{/home/user}
\newcommand{\terminalcmd}[1][]{%
\textbf{%
	{\color{olivedrab} \termuser\text{@}\termhost:}%
	{\color{funblue} \termdir}}\$ #1
}

\lstnewenvironment{terminal}[1][]{
	\lstset{
		style=defaults,
		backgroundcolor=\color{black},
		basicstyle=\footnotesize\ttfamily\color{white},
		captionpos=b,
		numbers=none,
		aboveskip=3mm,
		belowskip=3mm,
		framexleftmargin=6pt,  xleftmargin=6pt,
		framexrightmargin=6pt, xrightmargin=6pt, 
		framextopmargin=6pt,
		framexbottommargin=6pt,
		frame=tb, framerule=0pt,
		showstringspaces=false,
		columns=flexible,
		breaklines=true,
		breakatwhitespace=true,
		tabsize=3,
		% Language settings
		numberstyle=\tiny\color{gray},
		commentstyle=\color{dkgreen},
		stringstyle=\color{red},
		% Classes
		classoffset=0,
		keywordstyle=\color{gigas},
		% Classes
		classoffset=1,
		keywords={System, String},
		keywordstyle=\color{deepviolet}\itshape,
	}
	\setkeys{lst}{#1}
}{}

\newcommand{\asdf}[1]{\textbf{#1}}

%% Bash code
\newenvironment{bashcode}{\endgraf\centering\itshape\bfseries}{}


% Style highlighting %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%% Java
\newproglanguage{java}{
	\lstset{
		language=Java,
		% Language settings
		numberstyle=\tiny\color{gray},
		commentstyle=\color{dkgreen},
		stringstyle=\color{red},
		% Classes
		classoffset=0,
		keywordstyle=\color{gigas},
		% Classes
		classoffset=1,
		keywords={System, String},
		keywordstyle=\color{deepviolet}\itshape,
	}
}

%% Python
\newproglanguage{python}{
	\lstset{
		language=Python,
		otherkeywords={self},             	 % Add keywords here
		keywordstyle=\color{deepblue},
		emph={
			__init__,
			TestApp,
			App,
			Button
		},          				    	 % Custom highlighting
		emphstyle=\color{deepviolet}\itshape,% Custom highlighting style
		stringstyle=\color{red},
	}
}

%% C++
\newproglanguage{cpp}{
	\lstset{
		language=C++,
		% Language settings
		commentstyle=\color{dkgreen}\ttfamily,
		identifierstyle=\color{black},
		stringstyle=\color{red}\ttfamily,
		morecomment=[l][\color{magenta}]{\#},
		% Syntax keywords
		classoffset=0,
		keywordstyle=\color{gigas},
		% Classes
		classoffset=1,
		keywordstyle=\color{deepviolet}\itshape,
	}
}


%% JavaScript
\lstdefinelanguage{JavaScript}{
	% Language settings
	sensitive=true,
	% Keywords
	classoffset=0,
	keywords={typeof, new, true, false, catch, function, return,
		null, catch, switch, var, if, in, while, do, else, case,
		break, const, let, class, export, boolean, throw, implements,
		default, import, this, extends},
	% Classes
	classoffset=1,
	keywords={Math, BrowserWindow, Menu, MenuItem, Rx, Observable, Date,
			  module, exports},
	% Comments
	comment=[l]{//},
	morecomment=[s]{/*}{*/},
	% Strings
	morestring=[b]',
	morestring=[b]",
}
\newproglanguage{js}{
	\lstset{
		language=JavaScript,
		% General theme
		commentstyle=\color{dkgreen}\ttfamily,
		identifierstyle=\color{black},
		stringstyle=\color{red}\ttfamily,
		% Syntax keywords
		classoffset=0,
		keywordstyle=\color{gigas},
		% Classes
		classoffset=1,
		keywordstyle=\color{deepviolet}\itshape,
	}
}

%% JavaScript
\lstdefinelanguage{TypeScript}{
	% Language settings
	language=JavaScript,
	sensitive=true,
	% Keywords
	classoffset=0,
	keywords={typeof, new, true, false, catch, function, return,
		null, catch, switch, var, if, in, while, do, else, case,
		break, const, let, class, export, throw, implements,
		default, import, this, extends,
		%
		interface, type, constructor, public, private, declare, module},
	% Classes
	classoffset=1,
	keywords={Math, BrowserWindow, Menu, MenuItem, Rx, Observable, Date,
		%
		string, Array, number, boolean, Buffer, void, any, Store},
	% Comments
	comment=[l]{//},
	morecomment=[s]{/*}{*/},
	% Strings
	morestring=[b]',
	morestring=[b]",
}
\newproglanguage{ts}{
	\lstset{
		language=TypeScript,
		% General theme
		commentstyle=\color{dkgreen},
		identifierstyle=\color{black},
		stringstyle=\color{red},
		% Syntax keywords
		classoffset=0,
		keywordstyle=\color{gigas},
		% Classes
		classoffset=1,
		keywordstyle=\color{deepviolet}\itshape,
	}
}

%% JSX
\lstdefinelanguage{JSX}{
	% Language settings
	alsoletter={<, >, \/},
	sensitive=true,
	% Keywords
	classoffset=0,
	keywords={typeof, new, true, false, catch, function, return,
		null, catch, switch, var, if, in, while, do, else, case,
		break, const, let, class, export, boolean, throw, implements,
		default, import, this, extends},
	% Classes
	classoffset=1,
	keywords={Math, BrowserWindow, Menu, MenuItem, Rx, Observable, Date},
	% HTML
	classoffset=2,
	keywords={<div>,<\/div>,/>},
	% Comments
	comment=[l]{//},
	morecomment=[s]{/*}{*/},
	% Strings
	morestring=[b]',
	morestring=[b]",
}
\newproglanguage{jsx}{
	\lstset{
		language=JSX,
		% General theme
		commentstyle=\color{dkgreen},
		identifierstyle=\color{black},
		stringstyle=\color{red},
		% Syntax keywords
		classoffset=0,
		keywordstyle=\color{gigas},
		% Classes
		classoffset=1,
		keywordstyle=\color{deepviolet}\itshape,
		% HTML
		classoffset=2,
		moredelim=*[s][{\color{saffron}}]{<}{>},
		keywordstyle=\color{saffron},
	}
}

%% Haxe
\lstdefinelanguage{Haxe}{
	% General theme
	sensitive=true,
	% Syntax keywords
	classoffset=0,
	keywords={class, static, public, function, var},
	% Classes
	classoffset=1,
	keywords={String, Void},
	% Comments
	comment=[l]{//},
	morecomment=[s]{/*}{*/},
	% Strings
	morestring=[b]',
	morestring=[b]"
}
\newproglanguage{haxe}{
	\lstset{
		language=Haxe,
		% General theme
		commentstyle=\color{dkgreen},
		stringstyle=\color{red},
		identifierstyle=\color{black},
		% Syntax keywords
		classoffset=0,
		keywordstyle=\color{gigas},
		% Classes
		classoffset=1,
		keywordstyle=\color{deepviolet}\itshape,
	}
}


%% Sass
\lstdefinelanguage{Sass}{
	alsoletter={-, :, \#, .},
	sensitive=false,
	% CSS properties
	classoffset=0,
	keywords={background-color:, color:, display:, flex:},
	% SCSS @ methods
	classoffset=1,
	keywords={@include, @mixin},
	% User defined variables and classes
	classoffset=2,
	% Comments
	comment=[l]{//},
	morecomment=[s]{/*}{*/},
	% Strings
	morestring=[b]',
	morestring=[b]"
}
\newproglanguage{sass}{
	\lstset{
		language=Sass,
		% General theme
		commentstyle=\color{dkgreen},
		stringstyle=\color{red},
		identifierstyle={\color{gigas}},
		% CSS properties
		classoffset=0,
		keywordstyle=\color{brightedred},
		% SCSS @ methods
		classoffset=1,
		keywordstyle=\color{black},
		% User defined variables and classes
		classoffset=2,
		keywordstyle=\color{deepviolet},
	}
}

%% HTML5
\lstdefinelanguage{HTML5}{
	language=html,
	sensitive=true, 
	alsoletter={<>=-},
	otherkeywords={
		% HTML tags
		<html>, <head>, <title>, </title>, <meta, />, </head>, <body>,
		<canvas, \/canvas>, <script>, </script>, </body>, </html>, <!,
		<header>, </header>,
		<style>, </style>, ><
	}, 
	morecomment=[s]{<!--}{-->},
	tag=[s]
}
\newproglanguage{html}{
	\lstset{
		language=HTML5,
		alsolanguage=JavaScript,
		% General theme
		commentstyle=\color{dkgreen}\ttfamily,
		stringstyle=\color{red}\ttfamily,
		identifierstyle={\color{black}\small\ttfamily},
		% CSS properties
		classoffset=0,
		keywordstyle=\color{gigas}\bfseries,
		% SCSS @ methods
		classoffset=1,
		keywordstyle=\color{turquoiseblue}\bfseries,
		% User defined variables and classes
		classoffset=2,
		keywordstyle=\color{pictonblue},
	}
}