\chapter{Img-spy}
\label{S:img-spy}

Imgspy is GUI (graphic user interface) that performs digital forensic analysis
using the sleuthkit as library. It is divided in a frontend and a backend. 


%%% RESUMEN DE COMO FUNCIONA EL BACKEND

Electron starts a process called Main which loads a Node.js script. It is in
charge of manage the whole application. This process launches two instances, the
window manager and the file system workers manager.

The window manager creates all windows shown to the user and handles the
communication between them. Each window run in another process Renderer and it
is an instance of a google chrome window that also has all the  node libraries
included. Windows are CaseSelector, Editor and Settings.

To perform communications, windows can listen to channel (a string) and send
data using the object ipcRenderer from Electron. A react component called
WindowEvent was created to listen those channels and make the management easier.

Also, it has to maintain a dictionary of all the windows to close the Main
process when all of them are closed. To do so, each type of window has it's own
unique name. This fact also guarantees that no more than one window of each type
is shown on the same time. 

Regarding file system workers manager, it is the one that performs the digital
forensic tasks. Since Main process must not be frozen performing long
calculations, many child processes are called waiting for those tasks. The
number depends on how many CPU cores have the computer running the program.

This instance also has a FIFO queue of queries that stores them if all the
workers are busy. Each query is encapsulated in a message containing an UUIDv1
to fix a possible order mismatch due to asynchronous responses.

% De todo esto podria hacer una figura para que quedara m√°s claro


%%% RESUMEN DE COMO FUNCIONA EL FRONTEND



